# Locked Components - DeÄŸiÅŸtirilmemesi Gereken BileÅŸenler

## KRÄ°TÄ°K: Bu dosyalar kilitlenmiÅŸtir!

AÅŸaÄŸÄ±daki bileÅŸenler UI/UX olarak tamamlanmÄ±ÅŸ ve test edilmiÅŸtir. **Bu dosyalarda deÄŸiÅŸiklik yapmayÄ±n** (kullanÄ±cÄ± aÃ§Ä±kÃ§a istemediÄŸi sÃ¼rece).

### ğŸ”’ Kilitli Dosyalar (Mobil App):

1. **`src/components/match/MatchLive.tsx`**
   - CanlÄ± maÃ§ eventleri (goller, kartlar, deÄŸiÅŸiklikler)
   - Event akÄ±ÅŸÄ± ve timeline
   - API entegrasyonu tamamlandÄ±
   - mockTestData import'u var ama MOCK_TEST_ENABLED=false

2. **`src/components/match/MatchStats.tsx`**
   - MaÃ§ istatistikleri (topa sahip olma, ÅŸutlar, kornerler vb.)
   - Oyuncu istatistikleri dropdown'larÄ±
   - xG (Expected Goals) hesaplamasÄ±
   - API entegrasyonu tamamlandÄ±

### âœ… Bu dosyalarda yapÄ±labilecek deÄŸiÅŸiklikler:

- Bug fix (sadece kritik hatalar)
- API entegrasyonu (mock â†’ gerÃ§ek API geÃ§iÅŸi)
- Performans optimizasyonu (gÃ¶rsel deÄŸiÅŸiklik olmadan)

### âŒ Bu dosyalarda YAPILMAMASI gerekenler:

- UI/UX deÄŸiÅŸiklikleri
- Renk/stil deÄŸiÅŸiklikleri
- Layout deÄŸiÅŸiklikleri
- Yeni Ã¶zellik ekleme (kullanÄ±cÄ± istemediÄŸi sÃ¼rece)

### ğŸ“… Ä°lk Kilitlenme: 10 Åubat 2026
### ğŸ“… Son GÃ¼ncelleme: 23 Åubat 2026

---

## ğŸ”’ KÄ°LÄ°TLÄ°: GerÃ§ek Kadro GÃ¶sterim KurallarÄ± (23 Åubat 2026)

Bu kurallar `MatchPrediction.tsx` ve `MatchSquad.tsx` iÃ§inde geÃ§erlidir.
**ONAY ALINMADAN DEÄÄ°ÅTÄ°RÄ°LMEZ.**

### Durum Matrisi:

| Durum | Tahmin YapmamÄ±ÅŸ | Tahmin YapmÄ±ÅŸ |
|-------|----------------|---------------|
| **MaÃ§ baÅŸlamadÄ±, lineup yok** | GerÃ§ek tab GÄ°ZLÄ° | GerÃ§ek tab GÄ°ZLÄ° |
| **MaÃ§ baÅŸlamadÄ±, lineup var** | GerÃ§ek tab GÄ°ZLÄ° (spoiler korumasÄ±) | GerÃ§ek tab GÃ–RÃœNÃœR ama "GerÃ§ek Kadroyu GÃ¶r" butonu ile (butona basÄ±nca tahminler KALÄ°CÄ° KÄ°LÄ°TLENÄ°R) |
| **MaÃ§ canlÄ±** | GerÃ§ek tab GÃ–RÃœNÃœR + tÃ¼m veriler aÃ§Ä±k | GerÃ§ek tab GÃ–RÃœNÃœR + tÃ¼m veriler aÃ§Ä±k, tahminler otomatik kilitli |
| **MaÃ§ bitmiÅŸ** | GerÃ§ek tab GÃ–RÃœNÃœR | GerÃ§ek tab GÃ–RÃœNÃœR + Puan kartÄ± gÃ¶sterilir |

### Kritik State'ler:
- `hasViewedRealLineup` â†’ true ise tahminler kalÄ±cÄ± kilitli (AsyncStorage'da saklanÄ±r)
- `realLineupVisible` = `isMatchLive || isMatchFinished || hasViewedRealLineup`
- `canShowRealLineupButton` = `!isMatchLive && !isMatchFinished && hasPrediction && hasRealLineupData && !hasViewedRealLineup`

### GerÃ§ek Ä°lk 11 YÃ¼kleme:
- `MatchSquad.tsx` â†’ `useEffect` lineup geldiÄŸinde **HER ZAMAN** state'e yazar (gÃ¶sterim kontrolÃ¼ ayrÄ±)
- `isKadroLocked` kontrolÃ¼ lineup yÃ¼klemeden KALDIRILDI (sadece gÃ¶sterimde kontrol var)

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Topluluk Verileri GÃ¶sterim KurallarÄ± (23 Åubat 2026)

| Durum | GÃ¶sterim |
|-------|----------|
| Tahmin yapmamÄ±ÅŸ | "Topluluk Verileri Kilitli" empty state |
| Tahmin yapmÄ±ÅŸ, gÃ¶rmemiÅŸ | "Topluluk Verilerini GÃ¶r" butonu (basÄ±nca tahminler kilitlenir) |
| Tahmin yapmÄ±ÅŸ, gÃ¶rmÃ¼ÅŸ | Topluluk verileri gÃ¶rÃ¼nÃ¼r, tahminler kalÄ±cÄ± kilitli |
| MaÃ§ canlÄ±/bitmiÅŸ | TÃ¼m topluluk verileri otomatik aÃ§Ä±k |

### Kritik State'ler:
- `communityDataVisible` = `hasViewedCommunityData || isMatchLive || isMatchFinished`
- Mock veri gÃ¶sterilmez, empty state veya gerÃ§ek veri gÃ¶sterilir

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Oyuncu Reaction Sistemi (23 Åubat 2026)

- GerÃ§ek sahada (predictionViewIndex === 2) oyuncu tÄ±klanÄ±nca:
  - MaÃ§ canlÄ±/bitmiÅŸ â†’ `liveReactionPlayer` popup aÃ§Ä±lÄ±r (tÃ¼m kullanÄ±cÄ±lar iÃ§in)
  - MaÃ§ baÅŸlamamÄ±ÅŸ â†’ `playerInfoPopup` aÃ§Ä±lÄ±r
- **Her kullanÄ±cÄ±** (tahmin yapmÄ±ÅŸ/yapmamÄ±ÅŸ) canlÄ±/bitmiÅŸ maÃ§ta oyuncu reaction yapabilir

---

## ğŸ”’ KÄ°LÄ°TLÄ°: GerÃ§ek Saha CanlÄ± GÃ¼ncelleme (23 Åubat 2026)

### Substitution YansÄ±tma:
- `threeFieldData.actualSquad` useMemo'sunda `liveEvents` dinlenir
- Substitution event geldiÄŸinde Ã§Ä±kan oyuncu, giren oyuncuyla sahada deÄŸiÅŸtirilir
- Giren oyuncuya yeÅŸil `isSubstitute` badge eklenir (yukarÄ± ok)
- Giren oyuncunun `substitutedFor` ve `subMinute` bilgisi saklanÄ±r

### Oyuncu Performans Popup:
- GerÃ§ek sahada oyuncuya tÄ±klanÄ±nca `liveEvents`'ten maÃ§ iÃ§i performans Ã§Ä±karÄ±lÄ±r
- GÃ¶sterilen bilgiler: goller, asistler, sarÄ±/kÄ±rmÄ±zÄ± kartlar, deÄŸiÅŸiklik durumu (girdi/Ã§Ä±ktÄ±)
- Bunlar reaction butonlarÄ±nÄ±n Ã¼stÃ¼nde "MaÃ§ PerformansÄ±" kartÄ± olarak gÃ¶sterilir
- `liveEvents` prop'u MatchDetail â†’ MatchPrediction'a `currentEvents` olarak geÃ§irilir

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Mock Veri KurallarÄ± (23 Åubat 2026)

- `communityMatchPredictions` state'i mock veriler iÃ§erir ama `hasRealCommunityData = false` olduÄŸu sÃ¼rece GÃ–STERÄ°LMEZ
- Topluluk sekmesinde `hasRealCommunityData` false ise "Topluluk Verileri HenÃ¼z Yeterli DeÄŸil" empty state gÃ¶sterilir
- Topluluk sahasÄ±nÄ±n altÄ±ndaki 1.516 kullanÄ±cÄ± satÄ±rÄ± da `hasRealCommunityData` false ise gizlenir
- Mock oyuncu topluluk verileri (setCommunityPredictions) KALDIRILDI, `communityPredictions` boÅŸ object
- Mock canlÄ± sinyal verileri KALINIYOR (backend API hazÄ±r olunca deÄŸiÅŸtirilecek)
- `hasRealCommunityData` flag'i backend topluluk API'si hazÄ±r olunca `true` yapÄ±lacak
- **ONAY ALINMADAN MOCK VERÄ° EKLENMEYECEK**

---

## ğŸ”’ KÄ°LÄ°TLÄ°: TakÄ±m PerformansÄ± DeÄŸerlendirmesi (23 Åubat 2026)

- `handleTeamPerformanceChange(value)` fonksiyonu tanÄ±mlÄ± ve Ã§alÄ±ÅŸÄ±r durumda
- 1-10 arasÄ± butonlarla deÄŸerlendirme yapÄ±labilir
- DeÄŸer `predictionData`'da kaydedilir ve AsyncStorage'dan yÃ¼klenir

---

## ğŸ”’ KÄ°LÄ°TLÄ°: GerÃ§ek SonuÃ§lar (actualResults) Veri KaynaÄŸÄ± (23 Åubat 2026)

- `actualResults` hem `matchData` hem `liveEvents`'ten beslenir
- Skor: `matchData.goals` / `matchData.score` â†’ `fullTimeHomeScore/awayScore`
- Kartlar: `liveEvents`'ten card event'leri sayÄ±lÄ±r â†’ `totalYellowCards/totalRedCards`
- Ä°lk gol dakikasÄ±: `liveEvents`'ten ilk goal event'i â†’ `firstGoalMinute`
- Oyuncu event'leri: `liveEvents`'ten her oyuncu iÃ§in gol/asist/kart/sub bilgisi â†’ `playerEvents`
- Dependency array: `[matchPhase, isMatchLive, isMatchFinished, matchId, matchData, liveEvents]`

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Puan Hesaplama ve GÃ¶sterim (23 Åubat 2026)

- Backend: `scoringService.js` TEK KAYNAK (deÄŸiÅŸiklik Ã¶nce backend, sonra frontend)
- Frontend: `scoringApi` ile `api.ts` Ã¼zerinden Ã§ekilir
- MaÃ§ bittiÄŸinde + tahmin yapÄ±lmÄ±ÅŸsa â†’ `MatchPrediction.tsx`'de otomatik puan kartÄ± gÃ¶sterilir
- Puan kartÄ± cluster bazlÄ±: Tempo, Disiplin, Fiziksel, Bireysel
- DoÄŸruluk yÃ¼zdesi ve odak bonusu/cezasÄ± gÃ¶sterilir

---

## ğŸ”’ KÄ°LÄ°TLÄ°: AnalysisFocusModal Layout (23 Åubat 2026)

- `AnalysisFocusModal.tsx` â†’ 2 sÃ¼tun, 3 satÄ±r layout
- `focusCard` geniÅŸliÄŸi: sabit `'48%'`
- **DEÄÄ°ÅTÄ°RÄ°LMEZ** - 3 sÃ¼tun veya farklÄ± layout kullanÄ±lmaz

---

## ğŸ”’ Kilitli YapÄ±landÄ±rmalar (FAZ 1-6 SonuÃ§larÄ±):

### Puanlama Sistemi
- **Kaynak:** `backend/services/scoringService.js` (TEK KAYNAK)
- **Sistem:** 1000 Tam Puan Ã¼zerinden
- **Frontend sadece gÃ¶sterir, hesaplama yapmaz**
- DeÄŸiÅŸiklik yapÄ±lacaksa Ã–NCE backend, SONRA frontend gÃ¼ncellenir

### API Port
- **Backend:** Port 3001 (deÄŸiÅŸtirilmemeli)
- **TÃ¼m frontend referanslarÄ± 3001'e yÃ¶nlendirildi**

### Mock Veri Sistemi
- **Merkezi dosya:** `src/data/mockDataProvider.ts`
- **Auth:** GerÃ§ek `authService.ts` kullanÄ±lÄ±r (mockAuthService silindi)
- **Topluluk verileri:** Veri yoksa boÅŸ state gÃ¶sterilir, sahte veri Ã¼retilmez

### KaldÄ±rÄ±lan Paketler (Geri eklenmemeli)
- `@react-native-firebase/*` (3 paket)
- `@testing-library/*`, `jest-expo`, `@playwright/test`, `playwright`
- Website: `@mui/*`, `@emotion/*`, `react-dnd*`, `react-slick`, `react-popper`, `react-responsive-masonry`

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Kadro Senkronizasyonu (23 Åubat 2026)

- `/players/squads` API-Football endpoint'i TEK KAYNAK
- `squadSyncService.js` â†’ season parametresi KULLANILMAZ (current squad dÃ¶ner)
- Lineup fallback: sadece DB'deki mevcut kadro daha kÃ¼Ã§Ã¼kse yazÄ±lÄ±r
- `cleanupTransferredPlayers()` ve `verifySquadPlayerTeamIds()` KALDIRILDI, geri eklenmez
- `backend/routes/teams.js` â†’ filtreleme mantÄ±ÄŸÄ± KALDIRILDI, geri eklenmez

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Favori TakÄ±mlar Senkronizasyonu (23 Åubat 2026)

- Kural: Maks 1 milli takÄ±m + 5 kulÃ¼p takÄ±mÄ±
- Senkronizasyon: `updated_at` timestamp karÅŸÄ±laÅŸtÄ±rmasÄ± (en son gÃ¼ncellenen master)
- Supabase daha yeni â†’ lokali gÃ¼ncelle
- Lokal daha yeni â†’ Supabase'i gÃ¼ncelle
- "Daha fazla takÄ±m olan kaynak master" KULLANILMAZ

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Kadro â€“ Formasyon SeÃ§ Butonu Konumu (26 Åubat 2026)

- **Dosya:** `src/components/match/MatchSquad.tsx`
- **Stil:** `selectFormationButton` â†’ `marginTop: 12`, `height: 50`, `borderRadius: 12`
- Buton konumu kullanÄ±cÄ± onayÄ± ile sabitlendi (Resim 1 ile uyumlu). **DeÄŸiÅŸtirilmez.**

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Tahmin Sekmesi â€“ SahalarÄ±n Yeri ve 3 Nokta (26 Åubat 2026)

- **Dosya:** `src/components/match/MatchPrediction.tsx`
- **Sabit blok (dikey scroll ile kaymaz):** `multiFieldFixedSection` â†’ sahalar + hemen altÄ±nda **scroll olmayan** 3 nokta (`multiFieldPageIndicatorsFixed`). 3 nokta sahalarÄ±n altÄ±nda sabit kalÄ±r.
- **Saha konumlarÄ± kilitli:** `multiFieldFixedSection` paddingTop: 2; `multiFieldWrapper` paddingHorizontal: 12, paddingTop/Bottom: 8; sahalar Kadro ile aynÄ± hizada.
- **Yatay scroll:** `snapToInterval={winW}`, `snapToAlignment="center"` â€“ saÄŸa/sola kaydÄ±rÄ±nca saha kesilmeden tam gÃ¶rÃ¼nÃ¼r, sahaya ortalÄ±.
- **DEÄÄ°ÅTÄ°RÄ°LMEZ** â€“ saha yerleri ve 3 noktalÄ± bildirim konumu sabit.

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Tahmin Sekmesi â€“ Konteyner, 3 Nokta ve Saha Ä°Ã§i BoÅŸ GÃ¶rÃ¼nÃ¼mleri (26 Åubat 2026)

**Dosya:** `src/components/match/MatchPrediction.tsx`  
**Bu yapÄ±lar kullanÄ±cÄ± onayÄ± ile sabitlendi. ASLA DEÄÄ°ÅTÄ°RME â€“ kullanÄ±cÄ± aÃ§Ä±kÃ§a istemediÄŸi sÃ¼rece.**

### Konteyner (saha altÄ± bilgi kutusu)
- **Stil:** `fieldBelowContent` â†’ **marginTop: 9** (saha ile konteyner arasÄ± mesafe). DeÄŸiÅŸtirilmez.
- Konteyner sahaya bitiÅŸik (arada ek boÅŸluk yok); sÄ±ra: Saha â†’ Konteyner â†’ 3 nokta.

### 3 nokta (sayfa gÃ¶stergesi)
- **Konum:** `multiFieldPageIndicatorsFixed` â†’ **position: absolute, left: 0, right: 0, bottom: 9**, zIndex: 10.
- **bottom: 9** sabit; ekranÄ±n en altÄ±nda kesilmeden gÃ¶rÃ¼nÃ¼r. DeÄŸiÅŸtirilmez.

### Saha iÃ§i boÅŸ gÃ¶rÃ¼nÃ¼mler (3 panel)

| Panel | Ä°kon / metin | Kurallar |
|-------|----------------|----------|
| **Benim Tahminim** | Soru iÅŸareti | Sadece **Text "?"** â€“ fontSize: **36**, fontWeight: **700**, color: #FFFFFF. **EtrafÄ±nda daire/border YOK.** BaÅŸlÄ±k ve alt satÄ±r **beyaz**. Ä°kon wrapper'da backgroundColor/hale YOK. |
| **Topluluk** | Kilit / istatistik | Ionicons **lock-closed** veya **stats-chart-outline**, **size: 45**, color: **#F59E0B**. BaÅŸlÄ±k #F59E0B, alt satÄ±r rgba(255,255,255,0.5). Ä°kon etrafÄ±nda **hale/backgroundColor YOK** (transparent wrapper). |
| **GerÃ§ek** | KÄ±rmÄ±zÄ± Ã¼nlem | Ionicons **alert-circle**, **size: 45**, color: **#EF4444**. BaÅŸlÄ±k "Ä°lk 11'ler HenÃ¼z Belli DeÄŸil" **#EF4444**, **textShadow YOK** (okunaklÄ±lÄ±k iÃ§in gÃ¶lge kullanÄ±lmaz). Alt satÄ±r rgba(255,255,255,0.6). Ä°kon etrafÄ±nda hale YOK. |

### Ä°lk saha altÄ± konteyner metni
- "Kadro sekmesinden formasyon seÃ§in..." ve diÄŸer bilgi metinleri **beyaz** (#FFFFFF). DiÄŸer iki panelin konteyner renkleri kendi temasÄ±nda kalÄ±r (Topluluk: sarÄ±/turuncu, GerÃ§ek: kÄ±rmÄ±zÄ±).

### Ã–zet â€“ yapÄ±lmayacaklar
- Konteyner `marginTop` veya 3 nokta `bottom` deÄŸerini deÄŸiÅŸtirmek.
- Soru iÅŸaretine daire/border eklemek veya ikonu help-circle yapmak.
- Topluluk/GerÃ§ek saha iÃ§i ikonlarÄ±na hale/backgroundColor eklemek.
- KÄ±rmÄ±zÄ± "Ä°lk 11'ler HenÃ¼z Belli DeÄŸil" yazÄ±sÄ±na textShadow eklemek.
- Ä°lk sahada yazÄ±larÄ± beyaz dÄ±ÅŸÄ± renge Ã§evirmek.

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Dashboard Scroll AyarlarÄ± (26 Åubat 2026)

**Bu ayarlar kullanÄ±cÄ± onayÄ± ile sabitlendi. ASLA DEÄÄ°ÅTÄ°RME.**

- **Dosya:** `src/components/Dashboard.tsx`
- **SCROLL_INSET_TOP = 156** â€“ CanlÄ±/yaklaÅŸan ilk kartÄ±n ekrandaki dikey konumu
- **SCROLL_CONTENT_PADDING_TOP** â€“ iOS: 238, diÄŸer: 228
- **SNAP_BACK_DELAY_MS = 5000** â€“ Ekrana 5 sn dokunulmazsa scroll canlÄ±/yaklaÅŸan ilk karta dÃ¶ner
- **scrollYToLiveOrUpcoming** formÃ¼lÃ¼: `SCROLL_CONTENT_PADDING_TOP + pastSectionHeight - SCROLL_INSET_TOP`
- Biten maÃ§lar en Ã¼stte (eski â†’ yeni), sonra canlÄ±, sonra yaklaÅŸan
- "Biten MaÃ§lar (71)" baÅŸlÄ±ÄŸÄ± kaldÄ±rÄ±ldÄ±, geri eklenmez

---

## ğŸ”’ KÄ°LÄ°TLÄ°: Tahmin Kilitleme Sistemi (23 Åubat 2026)

- Oyuncu tahmini kaydetmek tahminleri KÄ°LÄ°TLEMEZ
- Sadece ÅŸu durumlarda tahminler kilitlenir:
  1. MaÃ§ baÅŸladÄ±ÄŸÄ±nda (canlÄ±)
  2. MaÃ§ bittiÄŸinde
  3. "Topluluk Verilerini GÃ¶r" butonuna basÄ±ldÄ±ÄŸÄ±nda
  4. "GerÃ§ek Kadroyu GÃ¶r" butonuna basÄ±ldÄ±ÄŸÄ±nda
- Genel "Kaydet" butonu tahminleri kayÄ±t eder ama KÄ°LÄ°TLEMEZ (maÃ§ baÅŸlamadÄ±ysa)
