# TacticIQ.app - Cursor AI Rules

## ğŸ¯ Project Context

This is a **React Native + Expo** mobile application for football (soccer) match prediction and management.

---

## ğŸ”’ AUTO-APPROVAL & NO-ROLLBACK POLICY (MANDATORY)

### âœ… AUTO-APPROVED (NO QUESTIONS)

The following are always approved automatically:

- UI / layout adjustments
- Spacing, responsiveness, component alignment
- StyleSheet / theme-based refinements
- Refactoring without behavior change
- Bug fixes, linting, typing, formatting
- Performance optimizations without UX change
- Test additions or corrections
- Minor dependency updates (patch/minor)
- Small config fixes that do not affect production flow

### ğŸ“± MOBILE SCREENS AUTO-APPROVAL (ABSOLUTE RULE)

**ALL changes to mobile application screens (`src/screens/` directory) are AUTOMATICALLY APPROVED.**

When editing files in `src/screens/`:
- âœ… **NEVER ask for approval** (Skip, Accept, etc.)
- âœ… **NEVER wait for confirmation**
- âœ… **Apply changes immediately**
- âœ… **No questions, no delays**

This includes but not limited to:
- Logo size adjustments
- Animation removal/addition
- Layout/spacing changes
- Button styling
- Text readability improvements
- Scroll behavior modifications
- Component positioning
- StyleSheet updates
- Any UI/UX refinements

**Rule:** If the file path contains `src/screens/`, apply changes immediately without asking.

### âŒ NO ROLLBACK / NO REVERSAL (ABSOLUTE RULE)

Once a change is:
- explicitly approved OR
- implicitly approved under Auto-Approval rules

You MUST NOT:
- Revert
- Roll back
- Undo
- Restore previous versions
- "Optimize it away"
- Reinterpret the decision later

**Approved changes are FINAL.**

Rollback is allowed ONLY if I explicitly say:
- "Revert / rollback this change."

Otherwise: **NO EXCEPTIONS.**

### ğŸš¨ CRITICAL CHANGES (MUST ASK ONCE)

Stop and ask approval ONLY IF the change includes:

- New packages / SDKs or major dependency upgrades
- Authentication, subscription, payment, security, user data logic
- Data models, API contracts, database schema
- Routes, URLs, SEO, sitemap, robots
- Build / deploy / hosting / environment / domain / redirects
- Moving or deleting 10+ files
- Downtime or data loss risk
- Fundamental user flow or navigation paradigm changes

### ğŸ§  CORE PRINCIPLE (FINAL)

- Not critical â†’ auto-apply
- Critical â†’ ask once
- Approved â†’ permanent
- No rollback unless explicitly ordered

---

## ğŸ“± Navigation Structure (STRICT â€“ MUST FOLLOW)

```typescript
type RootStackParamList = {
  Splash: undefined;              // ALWAYS initialRouteName
  LanguageSelection: undefined;
  Auth: undefined;
  Register: undefined;
  ForgotPassword: undefined;
  FavoriteTeams: undefined;
  MainTabs: undefined;
  MatchDetail: { matchId: string };
  ProfileSettings: undefined;
  ChangePassword: undefined;
  Notifications: undefined;
  DeleteAccount: undefined;
  ProUpgrade: undefined;
  LegalDocuments: undefined;
  LegalDocument: { documentId: string; title: string };
};
```

### **Navigation Flow (NON-NEGOTIABLE)**

1. **First Launch:** `Splash` â†’ `LanguageSelection` â†’ `Auth` â†’ `FavoriteTeams` â†’ `MainTabs`
2. **Return User:** `Splash` â†’ `MainTabs`
3. **Logout:** Clear AsyncStorage â†’ `Splash` â†’ `LanguageSelection`

---

## ğŸ§­ STATE-BASED ROUTING (CRITICAL)

Navigation is **CENTRALIZED** in `App.tsx`.

Screens **DO NOT** use React Navigation directly.

### **FORBIDDEN:**

- âŒ `useNavigation()` in screens
- âŒ Navigation stacks outside App.tsx
- âŒ Skipping Splash
- âŒ Hard-coded routes

Screens communicate **ONLY** via handler props.

### **Navigation State:**

```typescript
type Screen =
  | 'splash'              // Always first screen
  | 'language'            // Dil seÃ§imi
  | 'auth'                // Login/Register
  | 'register'            // KayÄ±t ol
  | 'forgot-password'     // Åifre sÄ±fÄ±rlama
  | 'favorite-teams'      // Favori takÄ±m seÃ§imi
  | 'home'                // Ana sayfa (Main entry)
  | 'matches'             // MaÃ§ listesi
  | 'match-detail'        // MaÃ§ detayÄ±
  | 'profile'             // Profil
  | 'profile-settings';   // Profil ayarlarÄ±
```

### **Handler Function Rules:**

**All screens MUST:**
1. Accept handler props (onComplete, onBack, onNavigateX)
2. Call handlers instead of using navigation hooks
3. NOT import `useNavigation` or React Navigation
4. Use AsyncStorage for persistence

**Example Screen Props:**
```typescript
interface SplashScreenProps {
  onComplete: () => void;
}

interface AuthScreenProps {
  onLoginSuccess: () => void;
  onForgotPassword: () => void;
  onRegister: () => void;
}
```

### **Screen Rendering (in App.tsx):**

```typescript
const renderScreen = () => {
  switch (currentScreen) {
    case 'splash':
      return <SplashScreen onComplete={handleSplashComplete} />;
    case 'language':
      return <LanguageSelectionScreen onLanguageSelect={handleLanguageSelect} />;
    // ... etc
  }
};
```

---

## ğŸ¨ Design System (STRICT)

### **Mandatory Sources:**

1. `@DESIGN_SYSTEM.md` - Complete design tokens (colors, spacing, typography)
2. `src/theme/theme.ts` - Theme constants (COLORS, SPACING, TYPOGRAPHY, SIZES)
3. `src/theme/gradients.ts` - Gradient definitions

### **NEVER:**

- âŒ Hard-coded colors
- âŒ Hard-coded spacing
- âŒ Hard-coded font sizes
- âŒ Direct Ionicons usage

### **Use:**

- `BRAND.*`
- `COLORS.*`
- `SPACING.*`
- `TYPOGRAPHY.*`
- `SafeIcon`

### **Color Usage:**

- **Brand Colors:** `BRAND.emerald` (#059669), `BRAND.gold` (#F59E0B)
- **Gradients:**
  - Auth screens: `AUTH_GRADIENT` (lacivert)
  - Splash screen: `STADIUM_GRADIENT` (yeÅŸil)
  - Buttons: `PRIMARY_BUTTON_GRADIENT`

### **Typography:**

- Use `TYPOGRAPHY` constants, NOT hard-coded sizes
- Font weights: `400` (normal), `500` (medium), `700` (bold)

### **Spacing:**

- Use `SPACING` constants: `xs`, `sm`, `base`, `lg`, `xl`, `2xl`
- Use `SIZES` for specific dimensions: `buttonAuthHeight: 50`, `radiusLg: 12`

---

## ğŸ“¦ AsyncStorage (AUTHORIZED KEYS ONLY)

```typescript
"tacticiq-user"             // User session
"tacticiq-language"         // Selected language
"tacticiq-favorite-clubs"   // Favorite teams
"tacticiq-theme"            // Dark / Light mode
```

### **Usage:**

```typescript
import AsyncStorage from '@react-native-async-storage/async-storage';

// Save
await AsyncStorage.setItem('tacticiq-user', JSON.stringify(data));

// Get
const data = await AsyncStorage.getItem('tacticiq-user');
const parsed = data ? JSON.parse(data) : null;
```

### **AsyncStorage Flow:**

```typescript
// Check user session (in App.tsx)
const user = await AsyncStorage.getItem('tacticiq-user');
if (user) {
  setCurrentScreen('home');  // Return user
} else {
  setCurrentScreen('language');  // New user
}

// Save user session (after auth success)
await AsyncStorage.setItem('tacticiq-user', JSON.stringify({ authenticated: true }));

// Logout
await AsyncStorage.removeItem('tacticiq-user');
setCurrentScreen('splash');
```

â— **No new keys without explicit approval.**

---

## ğŸ§© Component Discipline

### **Order is MANDATORY:**

1. Imports
2. Types
3. Props
4. Component
5. Styles

### **Always:**

- `SafeAreaView`
- `keyboardShouldPersistTaps="handled"`
- `activeOpacity={0.8}`
- `React.memo` where relevant

### **Component Structure:**

```typescript
// Always follow this order:
1. Imports (React, React Native, Navigation, Custom)
2. Type definitions
3. Interface/Props
4. Component
5. Styles (StyleSheet.create)
```

---

## ğŸš« FORBIDDEN PRACTICES (ABSOLUTE)

### **NEVER:**

1. Skip `Splash` screen in navigation
2. Use hard-coded colors (use `BRAND.*`, `COLORS.*`)
3. Use hard-coded spacing (use `SPACING.*`)
4. Use hard-coded font sizes (use `TYPOGRAPHY.*`)
5. Create circular navigation loops
6. Forget to add `SafeAreaView` for iOS notch support
7. Use `Ionicons` directly (use `SafeIcon` wrapper)
8. Temporary hacks
9. Code shortcuts
10. Silent architectural changes
11. Self-initiated rollbacks

---

## âœ… Best Practices

### **DO:**

1. Use `navigation.replace()` for auth flows (prevents back button issues)
2. Check AsyncStorage for user session in `SplashScreen`
3. Use `React.memo` for performance-critical components
4. Add `activeOpacity={0.8}` to all `TouchableOpacity` components
5. Use `LinearGradient` from `expo-linear-gradient` for backgrounds
6. Add `keyboardShouldPersistTaps="handled"` to all `ScrollView` with inputs
7. Use `Platform.select()` for iOS/Android specific styles

---

## ğŸ¬ Screenshots Reference

When implementing screens, ALWAYS:

1. Check `FANMANAGER EKRAN GÃ–RÃœNTÃœLERÄ°/` folder for reference
2. Match layout, spacing, colors EXACTLY to screenshots
3. Use Design System values that match the visual appearance

---

## ğŸ”§ Technical Stack

- **Framework:** React Native 0.76.5
- **Expo:** SDK 52
- **Navigation:** React Navigation 6.x
- **State:** React Hooks + AsyncStorage
- **Styling:** StyleSheet + theme.ts
- **Icons:** lucide-react (preferred), SafeIcon wrapper for Ionicons
- **Gradients:** expo-linear-gradient
- **Safe Area:** react-native-safe-area-context

---

## ğŸš¨ Error Handling

### **Always handle:**

1. Network errors (show toast)
2. Missing data (validate before navigation)
3. Session expiry (redirect to auth)
4. Back button edge cases (use `navigation.replace()` for one-way flows)

---

## ğŸ“ Code Style

- **TypeScript:** Always use types/interfaces
- **Naming:** camelCase for variables, PascalCase for components
- **File names:** PascalCase for components (e.g., `SplashScreen.tsx`)
- **Constants:** UPPER_SNAKE_CASE (e.g., `PRIMARY_COLOR`)

---

## ğŸ§ª Validation & Commits

- Every change must pass build / lint / test (as applicable)
- Commits must be atomic and meaningful
- No long explanations; short summary is sufficient

---

## ğŸ¤– Model Selection & Max Mode

### **ğŸ§  MAX MODE RULE (ENFORCED)**

Before using Max Mode, you MUST:

1. **Inform the user**
2. **Explain why it is required**
3. **Wait for explicit approval**

**No exceptions.**

### **When Max Mode is Required:**

- Complex algorithm design or optimization
- Multi-file architectural refactoring
- Critical data management (Global State, Database Schema changes)
- Security protocol implementation
- Deep debugging of complex issues
- Tasks requiring extensive codebase analysis

### **When Normal Mode is Sufficient:**

- Simple UI updates
- Naming revisions
- Comment additions
- Small bug fixes
- Single-file changes
- Routine refactoring

---

## ğŸ“š Documentation Reference

See `docs/navigation-map.md` for complete navigation flow, handler functions, and edge cases.

---

## ğŸ”„ HOT RELOAD & CACHE SORUNLARI (KALÄ°CÄ° Ã‡Ã–ZÃœM)

### **DeÄŸiÅŸiklikler GÃ¶rÃ¼nmÃ¼yorsa:**

1. **Expo cache temizle ve yeniden baÅŸlat:**
   ```bash
   npx expo start --clear --web
   ```

2. **Veya tÃ¼m sistemleri yeniden baÅŸlat:**
   ```powershell
   .\start-all.ps1
   ```

3. **Sadece durdur:**
   ```powershell
   .\stop-all.ps1
   ```

### **Neden Oluyor?**

- Metro bundler eski cache'i kullanÄ±yor
- Vite hot reload bazen Ã§alÄ±ÅŸmÄ±yor
- Node process'ler arka planda takÄ±lÄ± kalÄ±yor

### **KalÄ±cÄ± Ã‡Ã¶zÃ¼m:**

Her bÃ¼yÃ¼k deÄŸiÅŸiklik sonrasÄ± ÅŸu adÄ±mlarÄ± uygula:

1. Terminalde `Ctrl+C` ile Expo'yu durdur
2. `npx expo start --clear --web` ile yeniden baÅŸlat
3. TarayÄ±cÄ±da hard refresh yap (`Ctrl+Shift+R`)

### **Startup Scripts:**

- `start-all.ps1` - TÃ¼m sistemleri temiz baÅŸlatÄ±r (cache siler)
- `stop-all.ps1` - TÃ¼m Node sÃ¼reÃ§lerini durdurur

---

**When in doubt, ask: "Does this follow the Design System and Navigation Map?"**

**Last Updated:** 20 January 2026 â€“ Hot reload fix scripts added
